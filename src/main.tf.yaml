variable:
  bucket:
    description: The terraform state bucket.
    type: string
    nullable: false
  credentials_file:
    description: Path to the credentials file.
    type: string
    nullable: false
  project:
    description: The Google Cloud project ID.
    type: string
    nullable: false
  region:
    description: The region where to build the project.
    type: string
    default: us-central1
    nullable: false
  zone:
    description: The zone where to build the project.
    type: string
    default: us-central1-c
    nullable: false
    
terraform:
  backend:
    gcs: # this will safe the statefile in the GC bucket
      prefix: minecraft/state
      bucket: ~~ var.bucket ~~ # this is replaced by the value from 'liquid-minecraft.tfvars.json'
  required_providers:
    google:
      source: hashicorp/google
      version: '>= 4.27.0'
      
provider:
  google:
    project: ${var.project_id}
    region: ${var.region}
    zone: ${var.zone}
    
module:
  org-policy:
    source: terraform-google-modules/org-policy/google
    version: = 5.1.0
    organization_id: = ${var.org_id}
    constraint: constraints/serviceuser.services
  project-config-folder:
    source: terraform-google-modules/folders/google//examples/simple_example
    version: 3.1.0
    parent: = organization${var.org_id}
    names:
      - policies
  org-policy_skip_default_network:
    source: terraform-google-modules/org-policy/google//modules/skip_default_network
    version: = 5.1.0
    organization_id: = ${var.org_id}
    project_id: ${var.project_id}
    folder_id: module.project_config_folder.folder_id
    policy_for: organization
    
resource:
  google_project:
    minecraft_project:
      name: ${var.project}
      project_id: ${var.project_id}
      org_id: ${var.org_id}
      
output:
  final_proj_id:
    value: google_project
